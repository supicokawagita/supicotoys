<form id="dreamForm">
  <textarea id="dreamInput" placeholder="夢を書いてね" rows="5" required></textarea>
  <button type="submit">送信</button>
</form>
<div id="status"></div>

<script>
  const form = document.getElementById('dreamForm');
  form.addEventListener('submit', e => {
    e.preventDefault();

    const dreamText = document.getElementById('dreamInput').value;
    const url = 'https://script.google.com/macros/s/AKfycbyjUjJAX_eXpkTSr_bwfyE7u-01khVYByzGzJ2GGhR_oIPl18UPEGJE0QySTgLdiDEYiA/exec?dream=' + encodeURIComponent(dreamText);

    // 注意: textとして受け取る（← JSONじゃない！）
    fetch(url)
      .then(response => response.text())
      .then(data => {
        document.getElementById('status').textContent = '夢日記送信成功！ありがとう😊';
        form.reset();
      })
      .catch(err => {
        document.getElementById('status').textContent = '送信エラーが発生しました…';
        console.error(err);
      });
  });
</script>
