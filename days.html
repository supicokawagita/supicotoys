<form id="dreamForm">
  <textarea id="dreamInput" placeholder="å¤¢ã‚’æ›¸ã„ã¦ã­" rows="5" required></textarea>
  <button type="submit">é€ä¿¡</button>
</form>
<div id="status"></div>

<script>
  const form = document.getElementById('dreamForm');
  form.addEventListener('submit', async e => {
    e.preventDefault();

    const dreamText = document.getElementById('dreamInput').value;
    const url = 'https://script.google.com/macros/s/AKfycbyIm6SU2rYc62L_mlcaHbkpAm9GvpCU-DJUyqlo25-K5g7Qbqq-jKHtYS4Vm9bY1KH6ng/exec';

    try {
      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ dream: dreamText }),
      });

      const data = await response.json();
      if (data.status === 'success') {
        document.getElementById('status').textContent = 'å¤¢æ—¥è¨˜é€ä¿¡æˆåŠŸï¼ã‚ã‚ŠãŒã¨ã†ğŸ˜Š';
        form.reset();
      } else {
        throw new Error(data.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼');
      }
    } catch (err) {
      document.getElementById('status').textContent = 'é€ä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸâ€¦';
      console.error(err);
    }
  });
</script>
